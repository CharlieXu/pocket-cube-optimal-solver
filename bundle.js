(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

//function PriorityQueue(maxPriority) {
//	if(maxPriority == null) maxPriority = 0;
//	var q = [];
//	for(var i=0; i<=maxPriority; i++) q.push([]);
//	
//	return {
//		push: function(val, priority) {
//			q[priority].push(val);
//		},
//		pop: function() {
//			for(var i=0; i<maxPriority; i++) {
//				if(q[i].length) return q[i].pop();
//			}
//			return null;
//		}
//	}
//}

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var PriorityQueue = function () {
	function PriorityQueue(maxPriority) {
		_classCallCheck(this, PriorityQueue);

		this.maxPriority = maxPriority || 0;
		this.q = [];
		for (var i = 0; i <= maxPriority; i++) {
			this.q.push([]);
		}
	}

	_createClass(PriorityQueue, [{
		key: "push",
		value: function push(val, priority) {
			this.q[priority].push(val);
		}
	}, {
		key: "pop",
		value: function pop() {
			for (var i = 0; i < this.maxPriority; i++) {
				if (this.q[i].length) return this.q[i].pop();
			}
			return null;
		}
	}]);

	return PriorityQueue;
}();

module.exports = PriorityQueue;

},{}],2:[function(require,module,exports){
'use strict';

var State = require('./state2');
var PriorityQueue = require('./priorityqueue');

function searchID(startNode) {
	// iterative deepening search
	for (var i = 8; i <= 8; i++) {
		var solution = searchDFS(startNode, 0, i);
		if (solution) return solution;
	}
	return null;
}

function searchDFS(node, depth, maxdepth) {
	if (isGoal(node)) return node;
	if (depth == maxdepth) return null;
	var successors = expand(node);
	for (var i = 0; i < successors.length; ++i) {
		var succ = successors[i];
		var f = depth + 1 + heuristics(succ);
		if (f <= maxdepth) {
			var res = searchDFS(succ, depth + 1, maxdepth);
			//if(res) return res;
		}
	}
	return null;
}

function searchAstar(node, depth, maxdepth) {
	var pq = new PriorityQueue(maxdepth);
	if (isGoal(node)) return node;
	if (depth == maxdepth) return null;
	var successors = expand(node);
	for (var i = 0; i < successors.length; ++i) {
		var succ = successors[i];
		var f = depth + 1 + heuristics(succ);
		if (f <= maxdepth) {
			var res = searchDFS(succ, depth + 1, maxdepth);
			//if(res) return res;
		}
	}
	return null;
}

function isGoal(state) {
	return state.isSolved();
}

function expand(state) {
	expanded++;
	var moves = [];
	var lastSide = state.lastMove && state.lastMove[0];
	switch (lastSide) {
		case 'U':
			moves = ['F1', 'F2', 'F3', 'R1', 'R2', 'R3'];break;
		case 'F':
			moves = ['U1', 'U2', 'U3', 'R1', 'R2', 'R3'];break;
		case 'R':
			moves = ['U1', 'U2', 'U3', 'F1', 'F2', 'F3'];break;
		default:
			moves = ['U1', 'U2', 'U3', 'F1', 'F2', 'F3', 'R1', 'R2', 'R3'];
	}
	return moves.map(function (x) {
		return state.move(x);
	});
}

function heuristics(state) {
	return 0;
}

function movesToString(state) {
	var moves = [];
	while (state.prevState) {
		moves.push(state.lastMove);
		state = state.prevState;
	}
	return moves.reverse();
}

function main() {
	var startState = new State().move('U1').move('F2').move('R1').move('F3').move('R2').move('U1').move('R3').move('U2').move('R1').move('F2');

	console.log('start state', startState);

	startState = startState.normalize().move('x2').move('x2');

	startState.prevState = null;
	startState.lastMove = null;

	console.log('normalized state', startState);

	console.time('search time');
	var solution = searchID(startState);
	console.timeEnd('search time');
	console.log('expanded', expanded);
	console.log('solution', solution);
	if (solution) console.log('steps', movesToString(solution));
}

var expanded = 0;
main();

},{"./priorityqueue":1,"./state2":3}],3:[function(require,module,exports){
'use strict';

function State(p, o, prevState, lastMove) {
	this.p = p || [0, 1, 2, 3, 4, 5, 6, 7]; // solved permutation
	this.o = o || [0, 0, 0, 0, 0, 0, 0, 0]; // solved orientation
	this.prevState = prevState || null;
	this.lastMove = lastMove || null;
}

/** Generates new State instance
*/
State.prototype.move = function (move) {
	var a, b;
	switch (move) {
		case 'U1':
			a = [2, 0, 3, 1, 4, 5, 6, 7];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'U2':
			a = [3, 2, 1, 0, 4, 5, 6, 7];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'U3':
			a = [1, 3, 0, 2, 4, 5, 6, 7];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'F1':
			a = [1, 5, 2, 3, 0, 4, 6, 7];b = [1, 2, 0, 0, 2, 1, 0, 0];break;
		case 'F2':
			a = [5, 4, 2, 3, 1, 0, 6, 7];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'F3':
			a = [4, 0, 2, 3, 5, 1, 6, 7];b = [1, 2, 0, 0, 2, 1, 0, 0];break;
		case 'R1':
			a = [4, 1, 0, 3, 6, 5, 2, 7];b = [2, 0, 1, 0, 1, 0, 2, 0];break;
		case 'R2':
			a = [6, 1, 4, 3, 2, 5, 0, 7];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'R3':
			a = [2, 1, 6, 3, 0, 5, 4, 7];b = [2, 0, 1, 0, 1, 0, 2, 0];break;
		case 'x1':
			a = [4, 5, 0, 1, 6, 7, 2, 3];b = [2, 1, 1, 2, 1, 2, 2, 1];break;
		case 'x2':
			a = [6, 7, 4, 5, 2, 3, 0, 1];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'x3':
			a = [2, 3, 6, 7, 0, 1, 4, 5];b = [2, 1, 1, 2, 1, 2, 2, 1];break;
		case 'y1':
			a = [2, 0, 3, 1, 6, 4, 7, 5];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'y2':
			a = [3, 2, 1, 0, 7, 6, 5, 4];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'y3':
			a = [1, 3, 0, 2, 5, 7, 4, 6];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'z1':
			a = [1, 5, 3, 7, 0, 4, 2, 6];b = [1, 2, 2, 1, 2, 1, 1, 2];break;
		case 'z2':
			a = [5, 4, 7, 6, 1, 0, 3, 2];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'z3':
			a = [4, 0, 6, 2, 5, 1, 7, 3];b = [1, 2, 2, 1, 2, 1, 1, 2];break;
	}

	var p = [0, 0, 0, 0, 0, 0, 0, 0];
	var o = [0, 0, 0, 0, 0, 0, 0, 0];

	for (var i = 0; i < 8; ++i) {
		p[i] = this.p[a[i]];
		o[i] = (this.o[a[i]] + b[i]) % 3;
	}

	return new State(p, o, this, move);
};

State.prototype.toString = function () {
	return '[' + this.p + '] [' + this.o + ']';
};

// works only for normalized state
State.prototype.isSolved = function () {
	for (var i = 0; i < 8; i++) {
		if (this.p[i] != i || this.o[i]) return false;
	}return true;
};

/** Rotate cube so cubie 7 is in its right place and orientation.
    Returns newly generated state with move history.
*/
State.prototype.normalize = function () {
	if (this.p[7] == 7 && this.o[7] == 0) return this;
	var moves = ['x1', 'x2', 'x3', 'y1', 'y2', 'y3', 'z1', 'z2', 'z3'];
	for (var i = 0; i < moves.length; i++) {
		var move1 = moves[i];
		var s1 = this.generateNextState(move1);
		if (s1.p[7] == 7 && s1.o[7] == 0) return s1;
		for (var j = 0; j < moves.length; j++) {
			var move2 = moves[j];
			if (move2[0] == move1[0]) continue;
			var s2 = s1.generateNextState(move2);
			if (s2.p[7] == 7 && s2.o[7] == 0) return s2;
		}
	}
};

module.exports = State;

},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJwcmlvcml0eXF1ZXVlLmpzIiwic2VhcmNoLmpzIiwic3RhdGUyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQW9CTTtBQUNMLFVBREssYUFDTCxDQUFZLFdBQVosRUFBeUI7d0JBRHBCLGVBQ29COztBQUN4QixPQUFLLFdBQUwsR0FBbUIsZUFBZSxDQUFmLENBREs7QUFFeEIsT0FBSyxDQUFMLEdBQVMsRUFBVCxDQUZ3QjtBQUd4QixPQUFJLElBQUksSUFBRSxDQUFGLEVBQUssS0FBRyxXQUFILEVBQWdCLEdBQTdCO0FBQWtDLFFBQUssQ0FBTCxDQUFPLElBQVAsQ0FBWSxFQUFaO0dBQWxDO0VBSEQ7O2NBREs7O3VCQU9BLEtBQUssVUFBVTtBQUNuQixRQUFLLENBQUwsQ0FBTyxRQUFQLEVBQWlCLElBQWpCLENBQXNCLEdBQXRCLEVBRG1COzs7O3dCQUlkO0FBQ0wsUUFBSSxJQUFJLElBQUUsQ0FBRixFQUFLLElBQUUsS0FBSyxXQUFMLEVBQWtCLEdBQWpDLEVBQXNDO0FBQ3JDLFFBQUcsS0FBSyxDQUFMLENBQU8sQ0FBUCxFQUFVLE1BQVYsRUFBa0IsT0FBTyxLQUFLLENBQUwsQ0FBTyxDQUFQLEVBQVUsR0FBVixFQUFQLENBQXJCO0lBREQ7QUFHQSxVQUFPLElBQVAsQ0FKSzs7OztRQVhEOzs7QUFtQk4sT0FBTyxPQUFQLEdBQWlCLGFBQWpCOzs7OztBQ3ZDQSxJQUFJLFFBQVEsUUFBUSxVQUFSLENBQVI7QUFDSixJQUFJLGdCQUFnQixRQUFRLGlCQUFSLENBQWhCOztBQUVKLFNBQVMsUUFBVCxDQUFrQixTQUFsQixFQUE2Qjs7QUFDNUIsTUFBSSxJQUFJLElBQUUsQ0FBRixFQUFLLEtBQUcsQ0FBSCxFQUFNLEdBQW5CLEVBQXdCO0FBQ3ZCLE1BQUksV0FBVyxVQUFVLFNBQVYsRUFBcUIsQ0FBckIsRUFBd0IsQ0FB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LCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbi8vZnVuY3Rpb24gUHJpb3JpdHlRdWV1ZShtYXhQcmlvcml0eSkge1xyXG4vL1x0aWYobWF4UHJpb3JpdHkgPT0gbnVsbCkgbWF4UHJpb3JpdHkgPSAwO1xyXG4vL1x0dmFyIHEgPSBbXTtcclxuLy9cdGZvcih2YXIgaT0wOyBpPD1tYXhQcmlvcml0eTsgaSsrKSBxLnB1c2goW10pO1xyXG4vL1x0XHJcbi8vXHRyZXR1cm4ge1xyXG4vL1x0XHRwdXNoOiBmdW5jdGlvbih2YWwsIHByaW9yaXR5KSB7XHJcbi8vXHRcdFx0cVtwcmlvcml0eV0ucHVzaCh2YWwpO1xyXG4vL1x0XHR9LFxyXG4vL1x0XHRwb3A6IGZ1bmN0aW9uKCkge1xyXG4vL1x0XHRcdGZvcih2YXIgaT0wOyBpPG1heFByaW9yaXR5OyBpKyspIHtcclxuLy9cdFx0XHRcdGlmKHFbaV0ubGVuZ3RoKSByZXR1cm4gcVtpXS5wb3AoKTtcclxuLy9cdFx0XHR9XHJcbi8vXHRcdFx0cmV0dXJuIG51bGw7XHJcbi8vXHRcdH1cclxuLy9cdH1cclxuLy99XHJcblxyXG5jbGFzcyBQcmlvcml0eVF1ZXVlIHtcclxuXHRjb25zdHJ1Y3RvcihtYXhQcmlvcml0eSkge1xyXG5cdFx0dGhpcy5tYXhQcmlvcml0eSA9IG1heFByaW9yaXR5IHx8IDA7XHJcblx0XHR0aGlzLnEgPSBbXTtcclxuXHRcdGZvcihsZXQgaT0wOyBpPD1tYXhQcmlvcml0eTsgaSsrKSB0aGlzLnEucHVzaChbXSk7XHJcblx0fVxyXG5cdFxyXG5cdHB1c2godmFsLCBwcmlvcml0eSkge1xyXG5cdFx0dGhpcy5xW3ByaW9yaXR5XS5wdXNoKHZhbCk7XHJcblx0fVxyXG5cdFxyXG5cdHBvcCgpIHtcclxuXHRcdGZvcihsZXQgaT0wOyBpPHRoaXMubWF4UHJpb3JpdHk7IGkrKykge1xyXG5cdFx0XHRpZih0aGlzLnFbaV0ubGVuZ3RoKSByZXR1cm4gdGhpcy5xW2ldLnBvcCgpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFByaW9yaXR5UXVldWU7XHJcbiIsInZhciBTdGF0ZSA9IHJlcXVpcmUoJy4vc3RhdGUyJyk7XHJcbnZhciBQcmlvcml0eVF1ZXVlID0gcmVxdWlyZSgnLi9wcmlvcml0eXF1ZXVlJyk7XHJcblxyXG5mdW5jdGlvbiBzZWFyY2hJRChzdGFydE5vZGUpIHsgLy8gaXRlcmF0aXZlIGRlZXBlbmluZyBzZWFyY2hcclxuXHRmb3IodmFyIGk9ODsgaTw9ODsgaSsrKSB7IFxyXG5cdFx0dmFyIHNvbHV0aW9uID0gc2VhcmNoREZTKHN0YXJ0Tm9kZSwgMCwgaSk7XHJcblx0XHRpZihzb2x1dGlvbikgcmV0dXJuIHNvbHV0aW9uO1xyXG5cdH1cclxuXHRyZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZnVuY3Rpb24gc2VhcmNoREZTKG5vZGUsIGRlcHRoLCBtYXhkZXB0aCkge1xyXG5cdGlmKGlzR29hbChub2RlKSkgcmV0dXJuIG5vZGU7XHJcblx0aWYoZGVwdGggPT0gbWF4ZGVwdGgpIHJldHVybiBudWxsO1xyXG5cdHZhciBzdWNjZXNzb3JzID0gZXhwYW5kKG5vZGUpO1xyXG5cdGZvcih2YXIgaT0wOyBpPHN1Y2Nlc3NvcnMubGVuZ3RoOyArK2kpIHtcclxuXHRcdHZhciBzdWNjID0gc3VjY2Vzc29yc1tpXTtcclxuXHRcdHZhciBmID0gZGVwdGggKyAxICsgaGV1cmlzdGljcyhzdWNjKTtcclxuXHRcdGlmKGYgPD0gbWF4ZGVwdGgpIHtcclxuXHRcdFx0dmFyIHJlcyA9IHNlYXJjaERGUyhzdWNjLCBkZXB0aCsxLCBtYXhkZXB0aCk7XHJcblx0XHRcdC8vaWYocmVzKSByZXR1cm4gcmVzO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gbnVsbDtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHNlYXJjaEFzdGFyKG5vZGUsIGRlcHRoLCBtYXhkZXB0aCkge1xyXG5cdHZhciBwcSA9IG5ldyBQcmlvcml0eVF1ZXVlKG1heGRlcHRoKTtcclxuXHRpZihpc0dvYWwobm9kZSkpIHJldHVybiBub2RlO1xyXG5cdGlmKGRlcHRoID09IG1heGRlcHRoKSByZXR1cm4gbnVsbDtcclxuXHR2YXIgc3VjY2Vzc29ycyA9IGV4cGFuZChub2RlKTtcclxuXHRmb3IodmFyIGk9MDsgaTxzdWNjZXNzb3JzLmxlbmd0aDsgKytpKSB7XHJcblx0XHR2YXIgc3VjYyA9IHN1Y2Nlc3NvcnNbaV07XHJcblx0XHR2YXIgZiA9IGRlcHRoICsgMSArIGhldXJpc3RpY3Moc3VjYyk7XHJcblx0XHRpZihmIDw9IG1heGRlcHRoKSB7XHJcblx0XHRcdHZhciByZXMgPSBzZWFyY2hERlMoc3VjYywgZGVwdGgrMSwgbWF4ZGVwdGgpO1xyXG5cdFx0XHQvL2lmKHJlcykgcmV0dXJuIHJlcztcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIG51bGw7XHJcbn1cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gaXNHb2FsKHN0YXRlKSB7XHJcblx0cmV0dXJuIHN0YXRlLmlzU29sdmVkKCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBleHBhbmQoc3RhdGUpIHtcclxuXHRleHBhbmRlZCsrO1xyXG5cdHZhciBtb3ZlcyA9IFtdO1xyXG5cdHZhciBsYXN0U2lkZSA9IHN0YXRlLmxhc3RNb3ZlICYmIHN0YXRlLmxhc3RNb3ZlWzBdO1xyXG5cdHN3aXRjaChsYXN0U2lkZSkge1xyXG5cdFx0Y2FzZSAnVSc6IG1vdmVzID0gWydGMScsICdGMicsICdGMycsICdSMScsICdSMicsICdSMyddOyBicmVhaztcclxuXHRcdGNhc2UgJ0YnOiBtb3ZlcyA9IFsnVTEnLCAnVTInLCAnVTMnLCAnUjEnLCAnUjInLCAnUjMnXTsgYnJlYWs7XHJcblx0XHRjYXNlICdSJzogbW92ZXMgPSBbJ1UxJywgJ1UyJywgJ1UzJywgJ0YxJywgJ0YyJywgJ0YzJ107IGJyZWFrO1xyXG5cdFx0ZGVmYXVsdDogbW92ZXMgPSBbJ1UxJywgJ1UyJywgJ1UzJywgJ0YxJywgJ0YyJywgJ0YzJywgJ1IxJywgJ1IyJywgJ1IzJ107XHJcblx0fVxyXG5cdHJldHVybiBtb3Zlcy5tYXAoeCA9PiBzdGF0ZS5tb3ZlKHgpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGV1cmlzdGljcyhzdGF0ZSkge1xyXG5cdHJldHVybiAwO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtb3Zlc1RvU3RyaW5nKHN0YXRlKSB7XHJcblx0dmFyIG1vdmVzID0gW107XHJcblx0d2hpbGUoc3RhdGUucHJldlN0YXRlKSB7XHJcblx0XHRtb3Zlcy5wdXNoKHN0YXRlLmxhc3RNb3ZlKTtcclxuXHRcdHN0YXRlID0gc3RhdGUucHJldlN0YXRlO1xyXG5cdH1cclxuXHRyZXR1cm4gbW92ZXMucmV2ZXJzZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWluKCkge1xyXG5cdHZhciBzdGFydFN0YXRlID0gbmV3IFN0YXRlKClcclxuXHRcdC5tb3ZlKCdVMScpXHJcblx0XHQubW92ZSgnRjInKVxyXG5cdFx0Lm1vdmUoJ1IxJylcclxuXHRcdC5tb3ZlKCdGMycpXHJcblx0XHQubW92ZSgnUjInKVxyXG5cdFx0Lm1vdmUoJ1UxJylcclxuXHRcdC5tb3ZlKCdSMycpXHJcblx0XHQubW92ZSgnVTInKVxyXG5cdFx0Lm1vdmUoJ1IxJylcclxuXHRcdC5tb3ZlKCdGMicpXHJcblx0XHJcblx0Y29uc29sZS5sb2coJ3N0YXJ0IHN0YXRlJywgc3RhcnRTdGF0ZSk7XHJcblx0XHJcblx0c3RhcnRTdGF0ZSA9IHN0YXJ0U3RhdGUubm9ybWFsaXplKClcclxuXHRcdC5tb3ZlKCd4MicpXHJcblx0XHQubW92ZSgneDInKVxyXG5cdFxyXG5cdHN0YXJ0U3RhdGUucHJldlN0YXRlID0gbnVsbDtcclxuXHRzdGFydFN0YXRlLmxhc3RNb3ZlID0gbnVsbDtcclxuXHRcclxuXHRjb25zb2xlLmxvZygnbm9ybWFsaXplZCBzdGF0ZScsIHN0YXJ0U3RhdGUpO1xyXG5cdFxyXG5cdGNvbnNvbGUudGltZSgnc2VhcmNoIHRpbWUnKTtcclxuXHR2YXIgc29sdXRpb24gPSBzZWFyY2hJRChzdGFydFN0YXRlKTtcclxuXHRjb25zb2xlLnRpbWVFbmQoJ3NlYXJjaCB0aW1lJyk7XHJcblx0Y29uc29sZS5sb2coJ2V4cGFuZGVkJywgZXhwYW5kZWQpO1xyXG5cdGNvbnNvbGUubG9nKCdzb2x1dGlvbicsIHNvbHV0aW9uKTtcclxuXHRpZihzb2x1dGlvbikgY29uc29sZS5sb2coJ3N0ZXBzJywgbW92ZXNUb1N0cmluZyhzb2x1dGlvbikpO1xyXG59XHJcblxyXG5cclxudmFyIGV4cGFuZGVkID0gMDtcclxubWFpbigpO1xyXG4iLCJmdW5jdGlvbiBTdGF0ZShwLCBvLCBwcmV2U3RhdGUsIGxhc3RNb3ZlKSB7XHJcblx0dGhpcy5wID0gcCB8fCBbMCwxLDIsMyw0LDUsNiw3XTsgIC8vIHNvbHZlZCBwZXJtdXRhdGlvblxyXG5cdHRoaXMubyA9IG8gfHwgWzAsMCwwLDAsMCwwLDAsMF07ICAvLyBzb2x2ZWQgb3JpZW50YXRpb25cclxuXHR0aGlzLnByZXZTdGF0ZSA9IHByZXZTdGF0ZSB8fCBudWxsO1xyXG5cdHRoaXMubGFzdE1vdmUgPSBsYXN0TW92ZSB8fCBudWxsO1xyXG59XHJcblxyXG5cclxuLyoqIEdlbmVyYXRlcyBuZXcgU3RhdGUgaW5zdGFuY2VcclxuKi9cclxuU3RhdGUucHJvdG90eXBlLm1vdmUgPSBmdW5jdGlvbihtb3ZlKSB7XHJcblx0dmFyIGEsIGI7XHJcblx0c3dpdGNoKG1vdmUpIHtcclxuXHRcdGNhc2UgJ1UxJzogYSA9IFsyLDAsMywxLDQsNSw2LDddOyBiID0gWzAsMCwwLDAsMCwwLDAsMF07IGJyZWFrO1xyXG5cdFx0Y2FzZSAnVTInOiBhID0gWzMsMiwxLDAsNCw1LDYsN107IGIgPSBbMCwwLDAsMCwwLDAsMCwwXTsgYnJlYWs7XHJcblx0XHRjYXNlICdVMyc6IGEgPSBbMSwzLDAsMiw0LDUsNiw3XTsgYiA9IFswLDAsMCwwLDAsMCwwLDBdOyBicmVhaztcclxuXHRcdGNhc2UgJ0YxJzogYSA9IFsxLDUsMiwzLDAsNCw2LDddOyBiID0gWzEsMiwwLDAsMiwxLDAsMF07IGJyZWFrO1xyXG5cdFx0Y2FzZSAnRjInOiBhID0gWzUsNCwyLDMsMSwwLDYsN107IGIgPSBbMCwwLDAsMCwwLDAsMCwwXTsgYnJlYWs7XHJcblx0XHRjYXNlICdGMyc6IGEgPSBbNCwwLDIsMyw1LDEsNiw3XTsgYiA9IFsxLDIsMCwwLDIsMSwwLDBdOyBicmVhaztcclxuXHRcdGNhc2UgJ1IxJzogYSA9IFs0LDEsMCwzLDYsNSwyLDddOyBiID0gWzIsMCwxLDAsMSwwLDIsMF07IGJyZWFrO1xyXG5cdFx0Y2FzZSAnUjInOiBhID0gWzYsMSw0LDMsMiw1LDAsN107IGIgPSBbMCwwLDAsMCwwLDAsMCwwXTsgYnJlYWs7XHJcblx0XHRjYXNlICdSMyc6IGEgPSBbMiwxLDYsMywwLDUsNCw3XTsgYiA9IFsyLDAsMSwwLDEsMCwyLDBdOyBicmVhaztcclxuXHRcdGNhc2UgJ3gxJzogYSA9IFs0LDUsMCwxLDYsNywyLDNdOyBiID0gWzIsMSwxLDIsMSwyLDIsMV07IGJyZWFrO1xyXG5cdFx0Y2FzZSAneDInOiBhID0gWzYsNyw0LDUsMiwzLDAsMV07IGIgPSBbMCwwLDAsMCwwLDAsMCwwXTsgYnJlYWs7XHJcblx0XHRjYXNlICd4Myc6IGEgPSBbMiwzLDYsNywwLDEsNCw1XTsgYiA9IFsyLDEsMSwyLDEsMiwyLDFdOyBicmVhaztcclxuXHRcdGNhc2UgJ3kxJzogYSA9IFsyLDAsMywxLDYsNCw3LDVdOyBiID0gWzAsMCwwLDAsMCwwLDAsMF07IGJyZWFrO1xyXG5cdFx0Y2FzZSAneTInOiBhID0gWzMsMiwxLDAsNyw2LDUsNF07IGIgPSBbMCwwLDAsMCwwLDAsMCwwXTsgYnJlYWs7XHJcblx0XHRjYXNlICd5Myc6IGEgPSBbMSwzLDAsMiw1LDcsNCw2XTsgYiA9IFswLDAsMCwwLDAsMCwwLDBdOyBicmVhaztcclxuXHRcdGNhc2UgJ3oxJzogYSA9IFsxLDUsMyw3LDAsNCwyLDZdOyBiID0gWzEsMiwyLDEsMiwxLDEsMl07IGJyZWFrO1xyXG5cdFx0Y2FzZSAnejInOiBhID0gWzUsNCw3LDYsMSwwLDMsMl07IGIgPSBbMCwwLDAsMCwwLDAsMCwwXTsgYnJlYWs7XHJcblx0XHRjYXNlICd6Myc6IGEgPSBbNCwwLDYsMiw1LDEsNywzXTsgYiA9IFsxLDIsMiwxLDIsMSwxLDJdOyBicmVhaztcclxuXHR9XHJcblx0XHJcblx0dmFyIHAgPSBbMCwwLDAsMCwwLDAsMCwwXTtcclxuXHR2YXIgbyA9IFswLDAsMCwwLDAsMCwwLDBdO1xyXG5cdFxyXG5cdGZvcih2YXIgaT0wOyBpPDg7ICsraSkge1xyXG5cdFx0cFtpXSA9IHRoaXMucFthW2ldXTtcclxuXHRcdG9baV0gPSAodGhpcy5vW2FbaV1dICsgYltpXSkgJSAzO1xyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gbmV3IFN0YXRlKHAsIG8sIHRoaXMsIG1vdmUpO1xyXG59O1xyXG5cclxuXHJcblN0YXRlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiAnWycgKyB0aGlzLnAgKyAnXSBbJyArIHRoaXMubyArICddJztcclxufTtcclxuXHJcbi8vIHdvcmtzIG9ubHkgZm9yIG5vcm1hbGl6ZWQgc3RhdGVcclxuU3RhdGUucHJvdG90eXBlLmlzU29sdmVkID0gZnVuY3Rpb24oKSB7XHJcblx0Zm9yKHZhciBpPTA7IGk8ODsgaSsrKSBpZih0aGlzLnBbaV0gIT0gaSB8fCB0aGlzLm9baV0pIHJldHVybiBmYWxzZTtcclxuXHRyZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcblxyXG4vKiogUm90YXRlIGN1YmUgc28gY3ViaWUgNyBpcyBpbiBpdHMgcmlnaHQgcGxhY2UgYW5kIG9yaWVudGF0aW9uLlxyXG4gICAgUmV0dXJucyBuZXdseSBnZW5lcmF0ZWQgc3RhdGUgd2l0aCBtb3ZlIGhpc3RvcnkuXHJcbiovXHJcblN0YXRlLnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbigpIHtcclxuXHRpZih0aGlzLnBbN109PTcgJiYgdGhpcy5vWzddPT0wKSByZXR1cm4gdGhpcztcclxuXHR2YXIgbW92ZXMgPSBbJ3gxJywgJ3gyJywgJ3gzJywgJ3kxJywgJ3kyJywgJ3kzJywgJ3oxJywgJ3oyJywgJ3ozJ107XHJcblx0Zm9yKHZhciBpPTA7IGk8bW92ZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdHZhciBtb3ZlMSA9IG1vdmVzW2ldO1xyXG5cdFx0dmFyIHMxID0gdGhpcy5nZW5lcmF0ZU5leHRTdGF0ZShtb3ZlMSk7XHJcblx0XHRpZihzMS5wWzddPT03ICYmIHMxLm9bN109PTApIHJldHVybiBzMTtcclxuXHRcdGZvcih2YXIgaj0wOyBqPG1vdmVzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdHZhciBtb3ZlMiA9IG1vdmVzW2pdO1xyXG5cdFx0XHRpZihtb3ZlMlswXSA9PSBtb3ZlMVswXSkgY29udGludWU7XHJcblx0XHRcdHZhciBzMiA9IHMxLmdlbmVyYXRlTmV4dFN0YXRlKG1vdmUyKTtcclxuXHRcdFx0aWYoczIucFs3XT09NyAmJiBzMi5vWzddPT0wKSByZXR1cm4gczI7XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBTdGF0ZTtcclxuIl19
