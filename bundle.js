(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var State = require('./state2');

function searchID(startNode) {
	// iterative deepening search
	for (var i = 8; i <= 8; i++) {
		var solution = searchDFS(startNode, 0, i);
		if (solution) return solution;
	}
	return null;
}

function searchDFS(node, depth, maxdepth) {
	if (isGoal(node)) return node;
	if (depth == maxdepth) return null;
	var successors = expand(node);
	for (var i = 0; i < successors.length; ++i) {
		var succ = successors[i];
		var f = depth + 1 + heuristics(succ);
		if (f <= maxdepth) {
			var res = searchDFS(succ, depth + 1, maxdepth);
			//if(res) return res;
		}
	}
	return null;
}

function isGoal(state) {
	return state.isSolved();
}

function expand(state) {
	expanded++;
	var moves = [];
	var lastSide = state.lastMove && state.lastMove[0];
	switch (lastSide) {
		case 'U':
			moves = ['F1', 'F2', 'F3', 'R1', 'R2', 'R3'];break;
		case 'F':
			moves = ['U1', 'U2', 'U3', 'R1', 'R2', 'R3'];break;
		case 'R':
			moves = ['U1', 'U2', 'U3', 'F1', 'F2', 'F3'];break;
		default:
			moves = ['U1', 'U2', 'U3', 'F1', 'F2', 'F3', 'R1', 'R2', 'R3'];
	}
	return moves.map(function (x) {
		return state.move(x);
	});
}

function heuristics(state) {
	return 0;
}

function movesToString(state) {
	var moves = [];
	while (state.prevState) {
		moves.push(state.lastMove);
		state = state.prevState;
	}
	return moves.reverse();
}

function main() {
	var startState = new State().move('U1').move('F2').move('R1').move('F3').move('R2').move('U1').move('R3').move('U2').move('R1').move('F2');

	console.log('start state', startState);

	startState = startState.normalize().move('x2').move('x2');

	startState.prevState = null;
	startState.lastMove = null;

	console.log('normalized state', startState);

	console.time('search time');
	var solution = searchID(startState);
	console.timeEnd('search time');
	console.log('expanded', expanded);
	console.log('solution', solution);
	if (solution) console.log('steps', movesToString(solution));
}

var expanded = 0;
main();

},{"./state2":2}],2:[function(require,module,exports){
'use strict';

function State(p, o, prevState, lastMove) {
	this.p = p || [0, 1, 2, 3, 4, 5, 6, 7]; // solved permutation
	this.o = o || [0, 0, 0, 0, 0, 0, 0, 0]; // solved orientation
	this.prevState = prevState || null;
	this.lastMove = lastMove || null;
}

/** Generates new State instance
*/
State.prototype.move = function (move) {
	var a, b;
	switch (move) {
		case 'U1':
			a = [2, 0, 3, 1, 4, 5, 6, 7];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'U2':
			a = [3, 2, 1, 0, 4, 5, 6, 7];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'U3':
			a = [1, 3, 0, 2, 4, 5, 6, 7];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'F1':
			a = [1, 5, 2, 3, 0, 4, 6, 7];b = [1, 2, 0, 0, 2, 1, 0, 0];break;
		case 'F2':
			a = [5, 4, 2, 3, 1, 0, 6, 7];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'F3':
			a = [4, 0, 2, 3, 5, 1, 6, 7];b = [1, 2, 0, 0, 2, 1, 0, 0];break;
		case 'R1':
			a = [4, 1, 0, 3, 6, 5, 2, 7];b = [2, 0, 1, 0, 1, 0, 2, 0];break;
		case 'R2':
			a = [6, 1, 4, 3, 2, 5, 0, 7];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'R3':
			a = [2, 1, 6, 3, 0, 5, 4, 7];b = [2, 0, 1, 0, 1, 0, 2, 0];break;
		case 'x1':
			a = [4, 5, 0, 1, 6, 7, 2, 3];b = [2, 1, 1, 2, 1, 2, 2, 1];break;
		case 'x2':
			a = [6, 7, 4, 5, 2, 3, 0, 1];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'x3':
			a = [2, 3, 6, 7, 0, 1, 4, 5];b = [2, 1, 1, 2, 1, 2, 2, 1];break;
		case 'y1':
			a = [2, 0, 3, 1, 6, 4, 7, 5];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'y2':
			a = [3, 2, 1, 0, 7, 6, 5, 4];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'y3':
			a = [1, 3, 0, 2, 5, 7, 4, 6];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'z1':
			a = [1, 5, 3, 7, 0, 4, 2, 6];b = [1, 2, 2, 1, 2, 1, 1, 2];break;
		case 'z2':
			a = [5, 4, 7, 6, 1, 0, 3, 2];b = [0, 0, 0, 0, 0, 0, 0, 0];break;
		case 'z3':
			a = [4, 0, 6, 2, 5, 1, 7, 3];b = [1, 2, 2, 1, 2, 1, 1, 2];break;
	}

	var p = [0, 0, 0, 0, 0, 0, 0, 0];
	var o = [0, 0, 0, 0, 0, 0, 0, 0];

	for (var i = 0; i < 8; ++i) {
		p[i] = this.p[a[i]];
		o[i] = (this.o[a[i]] + b[i]) % 3;
	}

	return new State(p, o, this, move);
};

State.prototype.toString = function () {
	return '[' + this.p + '] [' + this.o + ']';
};

// works only for normalized state
State.prototype.isSolved = function () {
	for (var i = 0; i < 8; i++) {
		if (this.p[i] != i || this.o[i]) return false;
	}return true;
};

/** Rotate cube so cubie 7 is in its right place and orientation.
    Returns newly generated state with move history.
*/
State.prototype.normalize = function () {
	if (this.p[7] == 7 && this.o[7] == 0) return this;
	var moves = ['x1', 'x2', 'x3', 'y1', 'y2', 'y3', 'z1', 'z2', 'z3'];
	for (var i = 0; i < moves.length; i++) {
		var move1 = moves[i];
		var s1 = this.generateNextState(move1);
		if (s1.p[7] == 7 && s1.o[7] == 0) return s1;
		for (var j = 0; j < moves.length; j++) {
			var move2 = moves[j];
			if (move2[0] == move1[0]) continue;
			var s2 = s1.generateNextState(move2);
			if (s2.p[7] == 7 && s2.o[7] == 0) return s2;
		}
	}
};

module.exports = State;

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzZWFyY2guanMiLCJzdGF0ZTIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLElBQUksUUFBUSxRQUFRLFVBQVIsQ0FBUjs7QUFFSixTQUFTLFFBQVQsQ0FBa0IsU0FBbEIsRUFBNkI7O0FBQzVCLE1BQUksSUFBSSxJQUFFLENBQUYsRUFBSyxLQUFHLENBQUgsRUFBTSxHQUFuQixFQUF3QjtBQUN2QixNQUFJLFdBQVcsVUFBVSxTQUFWLEVBQXFCLENBQXJCLEVBQXdCLENBQXhCLENBQVgsQ0FEbUI7QUFFdkIsTUFBRyxRQUFILEVBQWEsT0FBTyxRQUFQLENBQWI7RUFGRDtBQUlBLFFBQU8sSUFBUCxDQUw0QjtDQUE3Qjs7QUFRQSxTQUFTLFNBQVQsQ0FBbUIsSUFBbkIsRUFBeUIsS0FBekIsRUFBZ0MsUUFBaEMsRUFBMEM7QUFDekMsS0FBRyxPQUFPLElBQVAsQ0FBSCxFQUFpQixPQUFPLElBQVAsQ0FBakI7QUFDQSxLQUFHLFNBQVMsUUFBVCxFQUFtQixPQUFPLElBQVAsQ0FBdEI7QUFDQSxLQUFJLGFBQWEsT0FBTyxJQUFQLENBQWIsQ0FIcUM7QUFJekMsTUFBSSxJQUFJLElBQUUsQ0FBRixFQUFLLElBQUUsV0FBVyxNQUFYLEVBQW1CLEVBQUUsQ0FBRixFQUFLO0FBQ3RDLE1BQUksT0FBTyxXQUFXLENBQVgsQ0FBUCxDQURrQztBQUV0QyxNQUFJLElBQUksUUFBUSxDQUFSLEdBQVksV0FBVyxJQUFYLENBQVosQ0FGOEI7QUFHdEMsTUFBRyxLQUFLLFFBQUwsRUFBZTtBQUNqQixPQUFJLE1BQU0sVUFBVSxJQUFWLEVBQWdCLFFBQU0sQ0FBTixFQUFTLFFBQXpCLENBQU47O0FBRGEsR0FBbEI7RUFIRDtBQVFBLFFBQU8sSUFBUCxDQVp5QztDQUExQzs7QUFnQkEsU0FBUyxNQUFULENBQWdCLEtBQWhCLEVBQXVCO0FBQ3RCLFFBQU8sTUFBTSxRQUFOLEVBQVAs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QUErQixJQUEvQixFQUFxQyxJQUFyQyxFQUEyQyxJQUEzQyxFQUFpRCxJQUFqRCxDQUFSLENBRmtDO0FBR3RDLE1BQUksSUFBSSxJQUFFLENBQUYsRUFBSyxJQUFFLE1BQU0sTUFBTixFQUFjLEdBQTdCLEVBQWtDO0FBQ2pDLE1BQUksUUFBUSxNQUFNLENBQU4sQ0FBUixDQUQ2QjtBQUVqQyxNQUFJLEtBQUssS0FBSyxpQkFBTCxDQUF1QixLQUF2QixDQUFMLENBRjZCO0FBR2pDLE1BQUcsR0FBRyxDQUFILENBQUssQ0FBTCxLQUFTLENBQVQsSUFBYyxHQUFHLENBQUgsQ0FBSyxDQUFMLEtBQVMsQ0FBVCxFQUFZLE9BQU8sRUFBUCxDQUE3QjtBQUNBLE9BQUksSUFBSSxJQUFFLENBQUYsRUFBSyxJQUFFLE1BQU0sTUFBTixFQUFjLEdBQTdCLEVBQWtDO0FBQ2pDLE9BQUksUUFBUSxNQUFNLENBQU4sQ0FBUixDQUQ2QjtBQUVqQyxPQUFHLE1BQU0sQ0FBTixLQUFZLE1BQU0sQ0FBTixDQUFaLEVBQXNCLFNBQXpCO0FBQ0EsT0FBSSxLQUFLLEdBQUcsaUJBQUgsQ0FBcUIsS0FBckIsQ0FBTCxDQUg2QjtBQUlqQyxPQUFHLEdBQUcsQ0FBSCxDQUFLLENBQUwsS0FBUyxDQUFULElBQWMsR0FBRyxDQUFILENBQUssQ0FBTCxLQUFTLENBQVQsRUFBWSxPQUFPLEVBQVAsQ0FBN0I7R0FKRDtFQUpEO0NBSDJCOztBQWdCNUIsT0FBTyxPQUFQLEdBQWlCLEtBQWpCIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsInZhciBTdGF0ZSA9IHJlcXVpcmUoJy4vc3RhdGUyJyk7XHJcblxyXG5mdW5jdGlvbiBzZWFyY2hJRChzdGFydE5vZGUpIHsgLy8gaXRlcmF0aXZlIGRlZXBlbmluZyBzZWFyY2hcclxuXHRmb3IodmFyIGk9ODsgaTw9ODsgaSsrKSB7IFxyXG5cdFx0dmFyIHNvbHV0aW9uID0gc2VhcmNoREZTKHN0YXJ0Tm9kZSwgMCwgaSk7XHJcblx0XHRpZihzb2x1dGlvbikgcmV0dXJuIHNvbHV0aW9uO1xyXG5cdH1cclxuXHRyZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZnVuY3Rpb24gc2VhcmNoREZTKG5vZGUsIGRlcHRoLCBtYXhkZXB0aCkge1xyXG5cdGlmKGlzR29hbChub2RlKSkgcmV0dXJuIG5vZGU7XHJcblx0aWYoZGVwdGggPT0gbWF4ZGVwdGgpIHJldHVybiBudWxsO1xyXG5cdHZhciBzdWNjZXNzb3JzID0gZXhwYW5kKG5vZGUpO1xyXG5cdGZvcih2YXIgaT0wOyBpPHN1Y2Nlc3NvcnMubGVuZ3RoOyArK2kpIHtcclxuXHRcdHZhciBzdWNjID0gc3VjY2Vzc29yc1tpXTtcclxuXHRcdHZhciBmID0gZGVwdGggKyAxICsgaGV1cmlzdGljcyhzdWNjKTtcclxuXHRcdGlmKGYgPD0gbWF4ZGVwdGgpIHtcclxuXHRcdFx0dmFyIHJlcyA9IHNlYXJjaERGUyhzdWNjLCBkZXB0aCsxLCBtYXhkZXB0aCk7XHJcblx0XHRcdC8vaWYocmVzKSByZXR1cm4gcmVzO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gbnVsbDtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGlzR29hbChzdGF0ZSkge1xyXG5cdHJldHVybiBzdGF0ZS5pc1NvbHZlZCgpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gZXhwYW5kKHN0YXRlKSB7XHJcblx0ZXhwYW5kZWQrKztcclxuXHR2YXIgbW92ZXMgPSBbXTtcclxuXHR2YXIgbGFzdFNpZGUgPSBzdGF0ZS5sYXN0TW92ZSAmJiBzdGF0ZS5sYXN0TW92ZVswXTtcclxuXHRzd2l0Y2gobGFzdFNpZGUpIHtcclxuXHRcdGNhc2UgJ1UnOiBtb3ZlcyA9IFsnRjEnLCAnRjInLCAnRjMnLCAnUjEnLCAnUjInLCAnUjMnXTsgYnJlYWs7XHJcblx0XHRjYXNlICdGJzogbW92ZXMgPSBbJ1UxJywgJ1UyJywgJ1UzJywgJ1IxJywgJ1IyJywgJ1IzJ107IGJyZWFrO1xyXG5cdFx0Y2FzZSAnUic6IG1vdmVzID0gWydVMScsICdVMicsICdVMycsICdGMScsICdGMicsICdGMyddOyBicmVhaztcclxuXHRcdGRlZmF1bHQ6IG1vdmVzID0gWydVMScsICdVMicsICdVMycsICdGMScsICdGMicsICdGMycsICdSMScsICdSMicsICdSMyddO1xyXG5cdH1cclxuXHRyZXR1cm4gbW92ZXMubWFwKHggPT4gc3RhdGUubW92ZSh4KSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhldXJpc3RpY3Moc3RhdGUpIHtcclxuXHRyZXR1cm4gMDtcclxufVxyXG5cclxuZnVuY3Rpb24gbW92ZXNUb1N0cmluZyhzdGF0ZSkge1xyXG5cdHZhciBtb3ZlcyA9IFtdO1xyXG5cdHdoaWxlKHN0YXRlLnByZXZTdGF0ZSkge1xyXG5cdFx0bW92ZXMucHVzaChzdGF0ZS5sYXN0TW92ZSk7XHJcblx0XHRzdGF0ZSA9IHN0YXRlLnByZXZTdGF0ZTtcclxuXHR9XHJcblx0cmV0dXJuIG1vdmVzLnJldmVyc2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFpbigpIHtcclxuXHR2YXIgc3RhcnRTdGF0ZSA9IG5ldyBTdGF0ZSgpXHJcblx0XHQubW92ZSgnVTEnKVxyXG5cdFx0Lm1vdmUoJ0YyJylcclxuXHRcdC5tb3ZlKCdSMScpXHJcblx0XHQubW92ZSgnRjMnKVxyXG5cdFx0Lm1vdmUoJ1IyJylcclxuXHRcdC5tb3ZlKCdVMScpXHJcblx0XHQubW92ZSgnUjMnKVxyXG5cdFx0Lm1vdmUoJ1UyJylcclxuXHRcdC5tb3ZlKCdSMScpXHJcblx0XHQubW92ZSgnRjInKVxyXG5cdFxyXG5cdGNvbnNvbGUubG9nKCdzdGFydCBzdGF0ZScsIHN0YXJ0U3RhdGUpO1xyXG5cdFxyXG5cdHN0YXJ0U3RhdGUgPSBzdGFydFN0YXRlLm5vcm1hbGl6ZSgpXHJcblx0XHQubW92ZSgneDInKVxyXG5cdFx0Lm1vdmUoJ3gyJylcclxuXHRcclxuXHRzdGFydFN0YXRlLnByZXZTdGF0ZSA9IG51bGw7XHJcblx0c3RhcnRTdGF0ZS5sYXN0TW92ZSA9IG51bGw7XHJcblx0XHJcblx0Y29uc29sZS5sb2coJ25vcm1hbGl6ZWQgc3RhdGUnLCBzdGFydFN0YXRlKTtcclxuXHRcclxuXHRjb25zb2xlLnRpbWUoJ3NlYXJjaCB0aW1lJyk7XHJcblx0dmFyIHNvbHV0aW9uID0gc2VhcmNoSUQoc3RhcnRTdGF0ZSk7XHJcblx0Y29uc29sZS50aW1lRW5kKCdzZWFyY2ggdGltZScpO1xyXG5cdGNvbnNvbGUubG9nKCdleHBhbmRlZCcsIGV4cGFuZGVkKTtcclxuXHRjb25zb2xlLmxvZygnc29sdXRpb24nLCBzb2x1dGlvbik7XHJcblx0aWYoc29sdXRpb24pIGNvbnNvbGUubG9nKCdzdGVwcycsIG1vdmVzVG9TdHJpbmcoc29sdXRpb24pKTtcclxufVxyXG5cclxuXHJcbnZhciBleHBhbmRlZCA9IDA7XHJcbm1haW4oKTtcclxuIiwiZnVuY3Rpb24gU3RhdGUocCwgbywgcHJldlN0YXRlLCBsYXN0TW92ZSkge1xyXG5cdHRoaXMucCA9IHAgfHwgWzAsMSwyLDMsNCw1LDYsN107ICAvLyBzb2x2ZWQgcGVybXV0YXRpb25cclxuXHR0aGlzLm8gPSBvIHx8IFswLDAsMCwwLDAsMCwwLDBdOyAgLy8gc29sdmVkIG9yaWVudGF0aW9uXHJcblx0dGhpcy5wcmV2U3RhdGUgPSBwcmV2U3RhdGUgfHwgbnVsbDtcclxuXHR0aGlzLmxhc3RNb3ZlID0gbGFzdE1vdmUgfHwgbnVsbDtcclxufVxyXG5cclxuXHJcbi8qKiBHZW5lcmF0ZXMgbmV3IFN0YXRlIGluc3RhbmNlXHJcbiovXHJcblN0YXRlLnByb3RvdHlwZS5tb3ZlID0gZnVuY3Rpb24obW92ZSkge1xyXG5cdHZhciBhLCBiO1xyXG5cdHN3aXRjaChtb3ZlKSB7XHJcblx0XHRjYXNlICdVMSc6IGEgPSBbMiwwLDMsMSw0LDUsNiw3XTsgYiA9IFswLDAsMCwwLDAsMCwwLDBdOyBicmVhaztcclxuXHRcdGNhc2UgJ1UyJzogYSA9IFszLDIsMSwwLDQsNSw2LDddOyBiID0gWzAsMCwwLDAsMCwwLDAsMF07IGJyZWFrO1xyXG5cdFx0Y2FzZSAnVTMnOiBhID0gWzEsMywwLDIsNCw1LDYsN107IGIgPSBbMCwwLDAsMCwwLDAsMCwwXTsgYnJlYWs7XHJcblx0XHRjYXNlICdGMSc6IGEgPSBbMSw1LDIsMywwLDQsNiw3XTsgYiA9IFsxLDIsMCwwLDIsMSwwLDBdOyBicmVhaztcclxuXHRcdGNhc2UgJ0YyJzogYSA9IFs1LDQsMiwzLDEsMCw2LDddOyBiID0gWzAsMCwwLDAsMCwwLDAsMF07IGJyZWFrO1xyXG5cdFx0Y2FzZSAnRjMnOiBhID0gWzQsMCwyLDMsNSwxLDYsN107IGIgPSBbMSwyLDAsMCwyLDEsMCwwXTsgYnJlYWs7XHJcblx0XHRjYXNlICdSMSc6IGEgPSBbNCwxLDAsMyw2LDUsMiw3XTsgYiA9IFsyLDAsMSwwLDEsMCwyLDBdOyBicmVhaztcclxuXHRcdGNhc2UgJ1IyJzogYSA9IFs2LDEsNCwzLDIsNSwwLDddOyBiID0gWzAsMCwwLDAsMCwwLDAsMF07IGJyZWFrO1xyXG5cdFx0Y2FzZSAnUjMnOiBhID0gWzIsMSw2LDMsMCw1LDQsN107IGIgPSBbMiwwLDEsMCwxLDAsMiwwXTsgYnJlYWs7XHJcblx0XHRjYXNlICd4MSc6IGEgPSBbNCw1LDAsMSw2LDcsMiwzXTsgYiA9IFsyLDEsMSwyLDEsMiwyLDFdOyBicmVhaztcclxuXHRcdGNhc2UgJ3gyJzogYSA9IFs2LDcsNCw1LDIsMywwLDFdOyBiID0gWzAsMCwwLDAsMCwwLDAsMF07IGJyZWFrO1xyXG5cdFx0Y2FzZSAneDMnOiBhID0gWzIsMyw2LDcsMCwxLDQsNV07IGIgPSBbMiwxLDEsMiwxLDIsMiwxXTsgYnJlYWs7XHJcblx0XHRjYXNlICd5MSc6IGEgPSBbMiwwLDMsMSw2LDQsNyw1XTsgYiA9IFswLDAsMCwwLDAsMCwwLDBdOyBicmVhaztcclxuXHRcdGNhc2UgJ3kyJzogYSA9IFszLDIsMSwwLDcsNiw1LDRdOyBiID0gWzAsMCwwLDAsMCwwLDAsMF07IGJyZWFrO1xyXG5cdFx0Y2FzZSAneTMnOiBhID0gWzEsMywwLDIsNSw3LDQsNl07IGIgPSBbMCwwLDAsMCwwLDAsMCwwXTsgYnJlYWs7XHJcblx0XHRjYXNlICd6MSc6IGEgPSBbMSw1LDMsNywwLDQsMiw2XTsgYiA9IFsxLDIsMiwxLDIsMSwxLDJdOyBicmVhaztcclxuXHRcdGNhc2UgJ3oyJzogYSA9IFs1LDQsNyw2LDEsMCwzLDJdOyBiID0gWzAsMCwwLDAsMCwwLDAsMF07IGJyZWFrO1xyXG5cdFx0Y2FzZSAnejMnOiBhID0gWzQsMCw2LDIsNSwxLDcsM107IGIgPSBbMSwyLDIsMSwyLDEsMSwyXTsgYnJlYWs7XHJcblx0fVxyXG5cdFxyXG5cdHZhciBwID0gWzAsMCwwLDAsMCwwLDAsMF07XHJcblx0dmFyIG8gPSBbMCwwLDAsMCwwLDAsMCwwXTtcclxuXHRcclxuXHRmb3IodmFyIGk9MDsgaTw4OyArK2kpIHtcclxuXHRcdHBbaV0gPSB0aGlzLnBbYVtpXV07XHJcblx0XHRvW2ldID0gKHRoaXMub1thW2ldXSArIGJbaV0pICUgMztcclxuXHR9XHJcblx0XHJcblx0cmV0dXJuIG5ldyBTdGF0ZShwLCBvLCB0aGlzLCBtb3ZlKTtcclxufTtcclxuXHJcblxyXG5TdGF0ZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gJ1snICsgdGhpcy5wICsgJ10gWycgKyB0aGlzLm8gKyAnXSc7XHJcbn07XHJcblxyXG4vLyB3b3JrcyBvbmx5IGZvciBub3JtYWxpemVkIHN0YXRlXHJcblN0YXRlLnByb3RvdHlwZS5pc1NvbHZlZCA9IGZ1bmN0aW9uKCkge1xyXG5cdGZvcih2YXIgaT0wOyBpPDg7IGkrKykgaWYodGhpcy5wW2ldICE9IGkgfHwgdGhpcy5vW2ldKSByZXR1cm4gZmFsc2U7XHJcblx0cmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG5cclxuLyoqIFJvdGF0ZSBjdWJlIHNvIGN1YmllIDcgaXMgaW4gaXRzIHJpZ2h0IHBsYWNlIGFuZCBvcmllbnRhdGlvbi5cclxuICAgIFJldHVybnMgbmV3bHkgZ2VuZXJhdGVkIHN0YXRlIHdpdGggbW92ZSBoaXN0b3J5LlxyXG4qL1xyXG5TdGF0ZS5wcm90b3R5cGUubm9ybWFsaXplID0gZnVuY3Rpb24oKSB7XHJcblx0aWYodGhpcy5wWzddPT03ICYmIHRoaXMub1s3XT09MCkgcmV0dXJuIHRoaXM7XHJcblx0dmFyIG1vdmVzID0gWyd4MScsICd4MicsICd4MycsICd5MScsICd5MicsICd5MycsICd6MScsICd6MicsICd6MyddO1xyXG5cdGZvcih2YXIgaT0wOyBpPG1vdmVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHR2YXIgbW92ZTEgPSBtb3Zlc1tpXTtcclxuXHRcdHZhciBzMSA9IHRoaXMuZ2VuZXJhdGVOZXh0U3RhdGUobW92ZTEpO1xyXG5cdFx0aWYoczEucFs3XT09NyAmJiBzMS5vWzddPT0wKSByZXR1cm4gczE7XHJcblx0XHRmb3IodmFyIGo9MDsgajxtb3Zlcy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHR2YXIgbW92ZTIgPSBtb3Zlc1tqXTtcclxuXHRcdFx0aWYobW92ZTJbMF0gPT0gbW92ZTFbMF0pIGNvbnRpbnVlO1xyXG5cdFx0XHR2YXIgczIgPSBzMS5nZW5lcmF0ZU5leHRTdGF0ZShtb3ZlMik7XHJcblx0XHRcdGlmKHMyLnBbN109PTcgJiYgczIub1s3XT09MCkgcmV0dXJuIHMyO1xyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gU3RhdGU7XHJcbiJdfQ==
